<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ask Prospectus Bot</title>
</head>
<body>
  <h1>University Prospectus Assistant</h1>
  <input type="text" id="queryInput" placeholder="Ask a question..." size="50">
  <button onclick="askQuestion()">Ask</button>

  <h2>Answer:</h2>
  <pre id="responseBox" style="white-space: pre-wrap;"></pre>

  <script>
    async function askQuestion() {
      const query = document.getElementById("queryInput").value;
      const responseBox = document.getElementById("responseBox");
      responseBox.textContent = "Thinking...";

      const response = await fetch("http://localhost:5001/ask", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ query })
      });

      if (!response.ok) {
        responseBox.textContent = "Error: " + response.statusText;
        return;
      }

      responseBox.textContent = "";

      const reader = response.body.getReader();
      const decoder = new TextDecoder();

      while (true) {
        const { value, done } = await reader.read();
        if (done) break;
        responseBox.textContent += decoder.decode(value);
      }
    }
  </script>
</body>
</html>